/* ========================================================================
 * jquery-circle - v0.0.1
 * 
 * ========================================================================
 * Copyright 2012-2013 
 *
 * ========================================================================
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================================
 */

(function(){var a=[].slice;!function(b,c){"use strict";var d;return d=function(){function a(a,c){null==c&&(c={}),this.$element=b(a),this.options=b.extend({},this.defaults,c,{value:this.$element.data("value"),min:this.$element.data("min"),max:this.$element.data("max"),step:this.$element.data("step"),width:this.$element.data("width"),text:this.$element.data("text"),animate:this.$element.data("animate"),duration:this.$element.data("duration")}),this.$value=b("<div>",{"class":"circle-value"},this.$slice=b("<div>",{"class":"circle-slice"})),this.$first=b("<div>",{"class":"circle-first"}),this.$second=b("<div>",{"class":"circle-second"}),this.$element.is(":empty")||(this.$element.data("original-text",this.$element.html()),this.$element.empty()),this.$element.addClass("circle"),this._isMoreHalf()&&this.$element.addClass("circle-half"),this.options.animate&&this.$slice.add(this.$first).add(this.$second).css({"-webkit-transition":"all "+this.options.animate+"ms","-moz-transition":"all "+this.options.animate+"ms","-o-transition":"all "+this.options.animate+"ms",transition:"all "+this.options.animate+"ms"}),this.$first.add(this.$second).css(this._getSize()),this.options.text&&this.$value.text(this.options.value),this.$element.append(this.$value,this.$slice.append(this.$first,this.$second)),this.$first.css(this._getTransform(this._getFirstDegrees(this.options.value))),this._duration(),this.$element}return a.prototype.defaults={value:0,min:0,max:100,step:1,width:10,text:!0,animate:1e3,duration:!1},a.prototype.value=function(a){return"undefined"==typeof a?this.options.state:null==a?this.options.value:(this.options.value=a,this.$element[this._isMoreHalf()?"addClass":"removeClass"]("circle-half"),this.$first.css(this._getTransform(this._getFirstDegrees(a))),this.options.text&&this.$value.text(a),this.$element)},a.prototype.destroy=function(){return this.$value.remove(),this.$slice.remove(),this.$element.removeClass("circle circle-half")},a.prototype._duration=function(){var a=this;if(this.options.duration)return this._timer=c.setInterval(function(){var b;return b=a.options.value+a.options.step,b>a.options.min&&b<a.options.max?a.value(b):c.clearInterval(a._timer)},parseInt(this.options.animate,10)||this.defaults.animate)},a.prototype._getTransform=function(a){return{"-webkit-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)"}},a.prototype._getSize=function(){return{"border-width":""+this.options.width/100+"em"}},a.prototype._getFirstDegrees=function(a){return 360/this.options.max*a},a.prototype._isMoreHalf=function(){return this.options.value>this.options.max/2},a}(),b.fn.extend({circle:function(){var c,e,f;return e=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],f=this,this.each(function(){var a,f;return a=b(this),f=a.data("circle"),f||a.data("circle",f=new d(this,e)),f[e]?f[e].apply(f,c):void 0}),f}})}(window.jQuery,window)}).call(this);